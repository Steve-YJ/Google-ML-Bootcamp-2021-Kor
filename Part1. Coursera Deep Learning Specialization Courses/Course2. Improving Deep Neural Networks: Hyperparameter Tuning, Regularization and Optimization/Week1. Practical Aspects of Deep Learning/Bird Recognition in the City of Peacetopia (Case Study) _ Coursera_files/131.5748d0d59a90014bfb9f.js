(window.webpackJsonp=window.webpackJsonp||[]).push([[131],{"3AUy":function(module,exports,e){var t=e("w6W7"),a;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},r=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},K6as:function(module,exports,e){},XFHP:function(module,e,t){"use strict";var a=t("lSNA"),n=t.n(a),r=t("VbXa"),i=t.n(r),o=t("q1tI"),s=t.n(o),u=t("XBa+"),c=t("uhOI"),m=t("d3Ej"),d=t.n(m),l=t("EqTq"),p=t("HOoY"),f=t("zaiP"),b=t("scbn"),S=t("qJwm"),v=t("F9Z8"),g=t("CnKM"),h=t("8ec0"),E=t("KvdX"),y=t("rQpo"),I=t("Cqp/"),C=t("lEBL"),D=t.n(C),T=t("PB6g");function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(a),!0).forEach(function(t){n()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var A=Object(l.a)("SubmissionControls"),P=function(e){function SubmissionControls(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).state={canSubmit:!1,announcement:""},t.onSubmitClick=function(){var e=t.props,a=e.hasUnfilledResponses,n=e.updateAndSubmitDraft,r=e.showModal,i=function trackedUpdateAndSubmitDraft(){return n&&n().then(function(){p.a.trackComponent({namespace:{app:"open_course",page:"item_page"}},{},"submit","quiz")})};a?r({type:E.a.unansweredQuestions,props:{onPrimaryButtonClick:i}}):n&&(t.setAnnouncement(d()("Submitting assignment")),i())},t.enableSubmit=function(){t.setState({canSubmit:!0})},t.disableSubmit=function(){t.setState({canSubmit:!1})},t.autoSubmit=function(){var e=t.props,a=e.showModal,n=e.hideModal,r=e.submitLatestSubmissionDraft;a({type:E.a.timeExpiredModal,props:{onPrimaryButtonClick:n}}),r&&r()},t.startAutoSubmitTimeout=function(){var e=t.props.expiresAt;"number"==typeof e&&(t.autoSubmitTimeout=window.setTimeout(t.autoSubmit,e-Date.now()))},t.setAnnouncement=function(e){t.setState({announcement:e},function(){setTimeout(function(){t.setState({announcement:""})},150)})},t.updateDraft=function(){var e=t.props.updateDraft;e&&(t.setAnnouncement(d()("Saving draft submission")),e().then(function(){t.setAnnouncement(d()("Draft submission saved successfully"))}))},t}i()(SubmissionControls,e);var t=SubmissionControls.prototype;return t.componentDidMount=function componentDidMount(){var e=this.props,t=e.hasDraft,a=e.autoSaveDraft,n=e.submitLatestSubmissionDraft;!t&&a&&a(),n&&this.startAutoSubmitTimeout()},t.componentDidUpdate=function componentDidUpdate(e){var t=this.props.expiresAt;e.expiresAt!==t&&this.autoSubmitTimeout&&(clearTimeout(this.autoSubmitTimeout),this.autoSubmitTimeout=null,this.startAutoSubmitTimeout())},t.componentWillUnmount=function componentWillUnmount(){this.autoSubmitTimeout&&clearTimeout(this.autoSubmitTimeout)},t.render=function render(){var e=this,t=this.props,a=t.stepState,n=a.isSaving,r=a.isSubmitting,i=a.isAutoSaving,o=t.stepState,m=t.setStepState,l=t.updateDraft,p=t.updateAndSubmitDraft,g=this.state,h=g.canSubmit,E=g.announcement,C=n||i||r;return s.a.createElement(f.a,null,function(t){var a=t.item;if(a&&a.isPremiumGradingLocked)return s.a.createElement("div",{className:A("upgrade-button")},s.a.createElement(y.a,{courseId:a.courseId}));return s.a.createElement("div",{className:A()},s.a.createElement("div",{className:A("honor-code-and-feedback")},s.a.createElement(v.a,{onAgreementComplete:e.enableSubmit,onAgreementIncomplete:e.disableSubmit}),s.a.createElement(b.a,{computedItem:a,itemFeedbackType:S.c.Quiz})),s.a.createElement("div",{className:A("buttons")},l&&s.a.createElement(u.a,{onClick:e.updateDraft,disabled:C,apiStatus:n||i?c.c:c.a,type:"secondary",rootClassName:A("button"),apiStatusAttributesConfig:{label:{API_BEFORE_SEND:d()("Save"),API_IN_PROGRESS:d()("Saving...")}}}),p&&s.a.createElement(u.a,{onClick:e.onSubmitClick,disabled:C||!h,apiStatus:r?c.c:c.a,type:"primary",rootClassName:A("button"),apiStatusAttributesConfig:{label:{API_BEFORE_SEND:d()("Submit"),API_IN_PROGRESS:d()("Submittingâ€¦")}}})),s.a.createElement(T.b,{tagName:"span",role:"region","aria-live":"assertive","aria-atomic":!0},E&&s.a.createElement("span",null,E)),s.a.createElement(I.a,{stepState:o,setStepState:m}))})},SubmissionControls}(s.a.Component),w=function SubmissionControlsContainer(e){var t=e.saveDraft,a=e.submitDraft,n=e.hasTimer,r=e.itemId,i=e.isSubmitted;if(!t||!a)return null;if(!n)return s.a.createElement(E.b,null,function(n){var r=n.showModal,o=n.hideModal;return i?null:s.a.createElement(P,_objectSpread(_objectSpread({},e),{},{updateDraft:t,updateAndSubmitDraft:a,showModal:r,hideModal:o}))});return s.a.createElement(g.a,{id:Object(h.a)(r)},function(n){var r=n.expiresAt;return s.a.createElement(E.b,null,function(n){var o=n.showModal,u=n.hideModal;return i?null:s.a.createElement(P,_objectSpread(_objectSpread({},e),{},{updateDraft:t,updateAndSubmitDraft:a,showModal:o,hideModal:u,expiresAt:r}))})})};e.a=w},lEBL:function(module,exports,e){var t=e("K6as"),a;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},r=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},vTTJ:function(module,e,t){"use strict";t.r(e),t.d(e,"AttemptPage",function(){return L}),t.d(e,"withRedirectToCover",function(){return M});var a=t("VbXa"),n=t.n(a),r=t("q1tI"),i=t.n(r),o=t("MnCE"),s=t("EqTq"),u=t("m10x"),c=t("+LJP"),m=t("usGt"),d=t("LHEl"),l=t("oe9u"),p=t("/oRK"),f=t("XFHP"),b=t("22Sa"),S=t("eK4/"),v=t("aBK/"),g=t("uAMc"),h=t("RH4a"),E=t("zaiP"),y=t("wIYG"),I=t("kYu0"),C=t("4QSv"),D=t("8ec0"),T=t("l0R+"),A=t("RLfs"),P=t("pJaO"),w=t("v4A+"),O=t("GZYn"),k=t("VtNW"),j=t.n(k),x=t("3AUy"),N=t.n(x),R=Object(s.a)("AttemptPage"),L=function(e){function AttemptPage(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).state={showSkillTaggingDialog:!1},t.handleKeepLearningClick=function(){t.setState({showSkillTaggingDialog:!0})},t}n()(AttemptPage,e);var t=AttemptPage.prototype;return t.componentDidMount=function componentDidMount(){var e=this.props,t=e.shouldRedirectToCover,a=e.redirectToCover;t&&a()},t.render=function render(){var e=this,t=this.props,a=t.redirectToCover,n=t.redirectToNextItem,r=t.addRedirectToCoverToRouteParams,o=t.examSessionId,s=this.state.showSkillTaggingDialog;return i.a.createElement(E.a,null,function(t){var c=t.item;if(!c)return null;return i.a.createElement(I.a,{standardProctorConfigurationId:c.contentSummary&&"exam"===c.contentSummary.typeName&&c.contentSummary.definition.standardProctorConfigurationId||null},function(t){var m=t.shouldShowTimer,E=t.secondsLeftInLatestAttempt,I=t.refetch,k=t.remainingAttempts;return i.a.createElement(b.a,{onClose:a,backbuttonAriaLabel:j()("Back"),headerLeft:i.a.createElement(l.a,{headerText:c.name,itemTypeText:j()("Graded Quiz"),timeCommitment:c.timeCommitment}),headerRight:i.a.createElement(v.a,{courseId:c.courseId,itemId:c.id,examSessionId:o},function(e){var t=e.isSubmitted;return i.a.createElement(p.a,{deadline:c.deadline,remainingTimeInMs:"number"==typeof E?1e3*E:null,showTimer:m&&!t,timerId:Object(D.a)(c.id)})}),topBanner:i.a.createElement(v.a,{courseId:c.courseId,itemId:c.id,examSessionId:o},function(t){var n=t.isSubmitted,r,o=(c.contentSummary&&"exam"===c.contentSummary.typeName&&c.contentSummary.definition||{}).passingFraction;if(n&&c.itemGrade){var s,u=(c.itemGrade||{}).isPassed,m=Object(O.b)(u,c.isCumulativeGraded,k);return i.a.createElement(d.a,{courseId:c.courseId,itemId:c.id},function(t){var n=t.lockingConfigurationSummary,r=t.bestEvaluation;return i.a.createElement("div",null,i.a.createElement(C.a,{itemGrade:c.itemGrade,computedScore:(r||{}).score,maxScore:(r||{}).maxScore,passingFraction:o,isCumulativeGraded:c.isCumulativeGraded,onKeepLearningClick:e.handleKeepLearningClick,remainingAttempts:k,lockingConfigurationSummary:n,onTryAgainClick:a}),Object(P.b)()&&m===O.a.PASSED&&i.a.createElement(P.a,{courseId:c.courseId,itemId:c.id}))})}return null})},i.a.createElement(w.a,{courseId:c.courseId,itemId:c.id},function(e){var t=e.postQuizSuggestions,a=e.loading;return i.a.createElement(v.a,{courseId:c.courseId,itemId:c.id,onQuizSessionQueryCompleted:function onQuizSessionQueryCompleted(){return I()},examSessionId:o},function(e){var n=e.quizFormData,o=e.sessionId,s=e.nextSubmissionDraftId,d=e.attemptScore,l=e.totalPoints,p=e.isSubmitted,b=e.hasDraft,v=e.isLimitedFeedback;if(!n||a||!o)return i.a.createElement(y.a,null);if(v)return null;var E=n.map(function(e){return e.prompt.id});return i.a.createElement(h.a,{itemId:c.id,courseId:c.courseId},function(e){var a=e.stepState,v=e.setStepState;return i.a.createElement("div",{className:R()},i.a.createElement("div",{className:R("header")},i.a.createElement(u.h,{tag:"h2"},c.name),p&&"number"==typeof d?i.a.createElement("div",{className:R("submission-grade")},i.a.createElement(u.l,{tag:"span"},j()("Latest Submission Grade")),i.a.createElement("div",{className:R("grade-percent")},"".concat(Object(T.a)(d),"%"))):i.a.createElement(u.a,{rootClassName:R("points")},i.a.createElement(u.l,{tag:"span"},j()("Total points #{totalPoints}",{totalPoints:l})))),i.a.createElement("div",{className:R("prompts")},n.map(function(e,n){return i.a.createElement(S.a,{key:e.prompt.id,quizQuestion:e,postQuizSuggestions:(p&&t||[]).find(function(t){return t.id===e.prompt.id}),index:n,isReadOnly:!!p,isDisabled:!!(a||{}).isSaving||!!(a||{}).isSubmitting})})),i.a.createElement(g.a,{ids:E,sessionId:o,nextSubmissionDraftId:s},function(e){var t=e.hasUnfilledResponses,n=e.saveDraft,o=e.autoSaveDraft,s=e.submitDraft,u=e.submitLatestSubmissionDraft;return i.a.createElement(f.a,{hasUnfilledResponses:t,itemId:c.id,courseId:c.courseId,saveDraft:n,autoSaveDraft:o,isSubmitted:p,submitDraft:function submitDraft(){return s?s().then(function(){r()}):Promise.reject()},submitLatestSubmissionDraft:function submitLatestSubmissionDraft(){return u?u().then(function(){r()}):Promise.reject()},hasTimer:m,hasDraft:b,stepState:a,setStepState:v})}))})})}),s&&i.a.createElement(A.b,{hideDialogDuringLoading:!1,scrollLockQuerySelector:".rc-TunnelVisionWrapper__content",dialogTitle:j()("Help us identify the right topics"),dialogDescription:j()("Select the skills that are covered in this quiz"),onClose:n,courseId:c.courseId,itemId:c.id}))})})},AttemptPage}(i.a.Component),M=Object(o.compose)(m.a,Object(c.a)(function(e,t){var a=t.nextItemUrl,n=void 0===a?"":a,r=t.refetchCoverPageData,i=t.refreshProgress,o=function redirectToCover(){r&&r(),e.push({name:"quiz-cover",params:e.params,query:e.location.query}),i()};return{redirectToCover:o,redirectToNextItem:function redirectToNextItem(){n?(e.push(n),i()):o()},addRedirectToCoverToRouteParams:function addRedirectToCoverToRouteParams(){e.push({name:"quiz-attempt",params:e.params,query:{redirectToCover:!0}})},shouldRedirectToCover:e.location.query.redirectToCover}}));e.default=M(L)},w6W7:function(module,exports,e){}}]);
//# sourceMappingURL=131.5748d0d59a90014bfb9f.js.map